# PyStitch360 개발 계획

## 🎯 개발 목표

GoPro 듀얼 카메라로 촬영한 360도 영상을 전처리부터 최종 출력까지 하나의 프로그램에서 자동화 처리할 수 있는 통합 GUI 툴 개발

## 🚀 개발 단계

### Phase 1: 프로젝트 구조 설정 및 기본 환경 구성
**우선순위:** High

**주요 작업:**
- 디렉터리 구조 생성
  - `gui/` - PyQt6 GUI 컴포넌트
  - `core/` - 핵심 처리 모듈
  - `presets/` - 카메라 캘리브레이션 데이터
  - `projects/` - 프로젝트 설정 파일
- `main.py` 기본 틀 작성
- 의존성 설치 및 테스트
- 기본 로깅 시스템 구축

**산출물:**
- 프로젝트 디렉터리 구조
- 실행 가능한 기본 애플리케이션
- 로깅 시스템

---

### Phase 2: 핵심 모듈 구현
**우선순위:** High

**주요 작업:**
- **`core/preprocessor.py`**
  - GoPro 파일 자동 인식 (`GOPR*.MP4`, `GP01*.MP4`)
  - FFmpeg 기반 concat 기능 (demuxer 방식)
  - 동기화 조정 기능
  
- **`core/stitcher.py`**
  - OpenCV 기반 스티칭 엔진
  - Equirectangular 투영 구현
  - 블렌딩 옵션 (Linear blending, Feather width)
  
- **`core/postprocessor.py`**
  - H.264 인코딩 (libx264, CRF, preset 설정)
  - 메타데이터 삽입 (projection=equirectangular)
  - Insta360 Studio 호환 포맷

**산출물:**
- 완성된 핵심 처리 모듈
- 각 모듈 단위 테스트
- 모듈 간 연동 인터페이스

---

### Phase 3: 기본 PyQt6 GUI 구현
**우선순위:** High

**주요 작업:**
- 메인 윈도우 레이아웃 구성
- 파일 선택 다이얼로그
- 기본 컨트롤 구현
  - 버튼 (파일 선택, 시작, 중지)
  - 슬라이더 (동기화 조정)
  - 프로그레스바 (진행 상태)
- 상태 표시 영역
- 메뉴 바 및 툴바

**산출물:**
- 완성된 기본 GUI 인터페이스
- 사용자 인터랙션 기능
- GUI 컴포넌트 연동

---

### Phase 4: GUI와 핵심 모듈 통합
**우선순위:** Medium

**주요 작업:**
- GUI에서 전처리 → 스티칭 → 후처리 파이프라인 연결
- 동기화 조정 슬라이더 기능 구현
- 진행 상태 표시 및 에러 핸들링
- 백그라운드 작업 처리 (멀티스레딩)
- 사용자 피드백 시스템

**산출물:**
- 완전히 통합된 워크플로우
- 에러 처리 및 사용자 알림
- 안정적인 멀티스레딩 구현

---

### Phase 5: 실시간 미리보기 및 방향 조정 기능
**우선순위:** Medium

**주요 작업:**
- OpenCV 기반 미리보기 위젯 구현
- 마우스 기반 Yaw/Pitch/Roll 조정
- 실시간 변경사항 반영
- 미리보기 성능 최적화
- 방향 조정 값 시각화

**산출물:**
- 실시간 미리보기 기능
- 직관적인 방향 조정 인터페이스
- 성능 최적화된 미리보기

---

### Phase 6: 프로젝트 설정 저장/불러오기
**우선순위:** Medium

**주요 작업:**
- JSON 기반 설정 저장/로드 기능
- 카메라 캘리브레이션 프리셋 관리
- 사용자 설정 유지 (최근 파일, 기본 설정)
- 설정 파일 검증 및 호환성 관리
- 프리셋 내보내기/가져오기

**산출물:**
- 프로젝트 설정 관리 시스템
- 카메라 캘리브레이션 프리셋
- 사용자 설정 지속성

---

### Phase 7: 테스트 및 최적화
**우선순위:** Low

**주요 작업:**
- 다양한 GoPro 영상으로 테스트
- 성능 최적화
  - 메모리 사용량 최적화
  - 처리 속도 개선
  - GPU 가속 활용 검토
- 사용자 인터페이스 개선
- 문서화 완성
- 배포 준비

**산출물:**
- 완성된 애플리케이션
- 성능 최적화 보고서
- 사용자 매뉴얼
- 배포 패키지

## 📋 개발 마일스톤

| Phase | 예상 기간 | 핵심 목표 |
|-------|-----------|-----------|
| Phase 1 | 1-2일 | 개발 환경 구축 |
| Phase 2 | 1주일 | 핵심 기능 구현 |
| Phase 3 | 3-4일 | GUI 기본 틀 완성 |
| Phase 4 | 1주일 | 통합 워크플로우 구현 |
| Phase 5 | 1주일 | 실시간 미리보기 |
| Phase 6 | 2-3일 | 설정 관리 |
| Phase 7 | 1주일 | 테스트 및 최적화 |

## 🔄 개발 원칙

1. **점진적 개발**: 각 Phase는 독립적으로 테스트 가능
2. **모듈화**: 각 기능을 독립적인 모듈로 구현
3. **사용자 중심**: 직관적이고 사용하기 쉬운 인터페이스
4. **확장성**: 향후 기능 추가를 고려한 아키텍처
5. **안정성**: 에러 처리 및 예외 상황 대응

## 📌 성공 기준

- [x] GoPro 파일 자동 인식 및 처리
- [x] 360도 영상 스티칭 기능
- [x] 실시간 미리보기 및 방향 조정
- [x] 사용자 친화적인 GUI
- [x] 안정적인 영상 출력 및 메타데이터 처리
- [x] 프로젝트 설정 저장/불러오기